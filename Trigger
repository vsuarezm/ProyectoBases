CREATE FUNCTION sumarTotal(idSucursal int)  
RETURNS int   
AS   
-- Returns the stock level for the product.  
BEGIN  
    DECLARE totalSucursal int;  
    SELECT @ret = SUM(p.precio)   
    FROM producto p,proveedor pr, ciudad c    
    WHERE p.idProovedor = pr.idProveedor AND pr.nombreCiudad = c.nombreCiudad AND c.idSucursal = idSucursal    
     IF (@ret IS NULL)   
        SET totalSucursal = 0;  
    RETURN totalSucursal;  
END;
